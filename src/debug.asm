
; ==============================================================
; --------------------------------------------------------------
; Mega PCM 2.0
; --------------------------------------------------------------
; Debug module (DEBUG only)
;
; (c) 2023, Vladikcomper
; --------------------------------------------------------------

; --------------------------------------------------------------
; Error trap routine
; --------------------------------------------------------------
; INPUT:
;	a	Error number
; --------------------------------------------------------------

Debug_ErrorTrap:
	di
	or	a
	jr	nz, .error_code_ok
	dec	a				; error code = FFh

.error_code_ok:
	ld	(DriverIO_RAM+sDriverIO.OUT_dbg_errorCode), a

.loop:
	nop
	nop
	jr	.loop
