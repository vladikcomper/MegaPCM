
; ==============================================================
; --------------------------------------------------------------
; Mega PCM 2.0
; --------------------------------------------------------------
; Debug module
;
; (c) 2023, Vladikcomper
; --------------------------------------------------------------


; --------------------------------------------------------------
; Error trap routine
; --------------------------------------------------------------
; INPUT:
;	a	Error number
; --------------------------------------------------------------

	ifdef __DEBUG__
Debug_ErrorTrap:
	DebugMsg "Exception raised"

	di
	or	a
	jr	nz, .error_code_ok
	dec	a				; error code = FFh

.error_code_ok:
	ld	(Debug_ErrorCode), a

.loop:
	nop
	nop
	jr	.loop
	endif
